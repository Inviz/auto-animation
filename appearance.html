<body>

<style>
body {
	position: relative;
	display: inline-block;
	overflow-x: hidden;
}
body, html {
	padding: 0;
	margin: 0;
}
 * {
 	box-sizing: border-box;
 }
 .morphing {
 	outline: 2px dashed blue;
 }
 .el {
 	background: green;
 	overflow: hidden;
 }
 .el.static {
 	background: darkgrey;
 }
 .test {
 	margin: 20px;
 	padding: 20px;
 	background: yellow;
 }
 #container {
 	min-height: 600px;
 	padding: 50px;
 	background: lightblue;
 }
 #parent1 {
 	background: teal;
 	padding: 10px
 }
 #root > * {
 	margin: 10px;
 }
 body > * {
 	margin: 10px;
 }
</style>

<script src="transition.js"></script>
<script src="snapshot.js"></script>

<div class="el static" id="unmoved">
	<div class="test">
		Static
	</div>
</div>
<div class="el" id="el1">
	<div class="test">
		Removed initially
	</div>
</div>
<div class="el" id="el2">
	<div class="test">
		Removed cascade
	</div>
</div>
<div class="el" id="el3" data-cascade-group="appearing">
	<div class="test">
		Removed cascade
	</div>
</div>
<div class="el" id="el4" data-cascade-group="appearing">
	<div class="test">
		Removed cascade
	</div>
</div>
<div class="el" id="el5" data-cascade-group="appearing">
	<div class="test">
		Removed cascade
	</div>
</div>
<div id="parent1">
	<div class="el" id="el6" data-cascade-group="appearing">
		<div class="test">
			Removed cascade
		</div>
	</div>
	<div class="el" id="el7" data-cascade-group="appearing">
		<div class="test">
			Removed cascade
		</div>
	</div>
</div>
<div class="el static" id="el8" data-cascade-group="appearing">
	<div class="test">
		Moved 
	</div>
</div>

<script>

	var snapshot = new Snapshot(document.body);

	snapshot.getAppearanceStyles = (to, from) => {
		if (!to.element.classList.contains('test') && to.element.id !== 'parent1') {
			return {
				opacity: 0,
			}
		}
	}

	snapshot.getDisappearanceStyles = (to, from) => {
		if (!to.element.classList.contains('test') && to.element.id !== 'parent1') {
			return {
				opacity: {
					value: 0,
					tension: 20,
					friction: 5,
				},
				scale: {
					value: .7,
					delay: 300,
				},
				translateX: {
					value: -50,
				},
			}
		}
	}

	snapshot = snapshot.mutate(() => {
		el1.parentNode.removeChild(el1)
	})

	setTimeout(() => {
		snapshot = snapshot.mutate(() => {
			window.z = true
			parent1.parentNode.removeChild(parent1)
		})
	}, 200)
</script>